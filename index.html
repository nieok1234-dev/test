<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dla Ciebie ‚ù§Ô∏è</title>
<style>
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: linear-gradient(180deg,#ff5fa0 0%, #ff2d71 100%);
    overflow:hidden;
    font-family:"Comic Sans MS", "Marker Felt", cursive, sans-serif;
  }

  .page{position:absolute;inset:0;display:none}
  .page.active{display:block}

  .falling{position:absolute;top:-80px;pointer-events:none;opacity:0.9;user-select:none;transform-origin:center;animation:fall linear infinite}
  @keyframes fall{ to{ transform: translateY(120vh) rotate(360deg);} }

  .flower{position:absolute;font-size:24px;pointer-events:none;animation:float 6s ease-in-out infinite}
  @keyframes float{50%{transform:translateY(-10px)}}

  .heart-box{
    position:absolute;
    width:280px;
    height:260px;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    color:white;
    z-index:5;
  }

  .heart{ position:relative; width:220px; height:200px; display:flex; align-items:center; justify-content:center; }
  .heart svg{ position:absolute; left:0; top:0; width:100%; height:100%; z-index:0; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.12)); }
  .heart .heart-content{ position:relative; z-index:2; width:70%; pointer-events:auto; }

  button.btn{ margin-top:12px; padding:10px 14px; border-radius:12px; border:none; cursor:pointer; font-weight:700; font-size:15px }

  .page3-container{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;z-index:4}
  .question{font-size:34px;color:#6b0532;text-shadow:0 3px 10px rgba(0,0,0,0.12);margin-bottom:6vh}

  .choices{position:absolute;bottom:40px;left:50%;transform:translateX(-50%);display:flex;gap:12px;align-items:center;z-index:6}
  .choice-tak{
    background:#2ecc71;color:white;padding:8px 12px;border-radius:8px;font-weight:900;transform-origin:center;font-size:14px;cursor:pointer;box-shadow:0 6px 14px rgba(0,0,0,0.12);
    transition: width 260ms ease, height 260ms ease, transform 220ms ease, font-size 220ms ease;
    display:flex;align-items:center;justify-content:center;
  }
  .choice-nie{background:#ff3b30;color:white;padding:8px 12px;border-radius:8px;font-weight:900;font-size:14px;cursor:pointer;box-shadow:0 6px 14px rgba(0,0,0,0.12)}

  .big-heart{position:relative;width:360px;height:320px;margin-bottom:16px;display:flex;align-items:center;justify-content:center;z-index:5}
  .big-heart svg{position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;filter: drop-shadow(0 12px 30px rgba(0,0,0,0.18))}
  .big-heart .inside{position:relative;z-index:2;width:78%;text-align:center;color:white}

  /* removed centered TAK text; only heartLines remain */

  .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);z-index:200}
  .overlay.show{display:flex}
  .explosion{position:absolute;inset:0;pointer-events:none;overflow:visible;z-index:210}
  .spark{position:absolute;width:12px;height:12px;border-radius:50%;pointer-events:none;opacity:0.95;transform:translate(-50%,-50%);animation:fly 1000ms ease-out forwards}
  @keyframes fly{ to{ transform: translate(var(--tx), var(--ty)) scale(0.4); opacity:0; } }

  .cats-gif{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:720px;height:auto;z-index:220;border-radius:14px;box-shadow:0 20px 50px rgba(0,0,0,0.35);overflow:hidden;display:none;background:white}
  .cats-gif.show{display:block}

  @media (max-width:840px){ .cats-gif{width:92vw} .big-heart{width:280px;height:240px} .heart-box{width:240px;height:220px} }
</style>
</head>
<body>

  <div id="page1" class="page active"></div>
  <div id="page2" class="page"></div>
  <div id="page3" class="page"></div>

  <div id="overlay" class="overlay" aria-hidden="true">
    <div id="explosion" class="explosion"></div>
    <!-- PRZYWR√ìCONY GIF z ca≈ÇujƒÖcymi kotami (tamten, kt√≥rego prosi≈Çe≈õ) -->
    <img id="catsGif" class="cats-gif" src="https://media.giphy.com/media/3oEduSbSGpGaRX2Vri/giphy.gif" alt="ca≈ÇujƒÖce siƒô koty" />
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const page1 = document.getElementById("page1");
  const page2 = document.getElementById("page2");
  const page3 = document.getElementById("page3");
  const pages = [page1,page2,page3];

  function showPage(n){ pages.forEach(p=>p.classList.remove("active")); pages[n].classList.add("active"); }

  function falling(parent,symbol,count){
    for(let i=0;i<count;i++){
      const el = document.createElement("div");
      el.className = "falling";
      el.textContent = symbol;
      el.style.left = (Math.random()*100)+"vw";
      el.style.fontSize = (12 + Math.random()*30)+"px";
      el.style.animationDuration = (4 + Math.random()*6)+"s";
      el.style.opacity = 0.6 + Math.random()*0.4;
      el.style.transform = `rotate(${Math.random()*360}deg)`;
      el.style.top = (-20 - Math.random()*120) + "px";
      parent.appendChild(el);
      setTimeout(()=> el.remove(), (parseFloat(el.style.animationDuration)||5)*1000 + 2000);
    }
  }

  function flowers(parent, emojis, howMany=20){
    for(let i=0;i<howMany;i++){
      const f = document.createElement("div");
      f.className = "flower";
      f.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      f.style.left = (Math.random()*95) + "vw";
      f.style.top = (Math.random()*85) + "vh";
      f.style.fontSize = (16 + Math.random()*28) + "px";
      f.style.opacity = 0.9 - Math.random()*0.4;
      parent.appendChild(f);
    }
  }

  /* PAGE1 */
  falling(page1,"‚ù§Ô∏è",60);
  flowers(page1,["üå∏","üå∫","üå∑","üåº"],18);
  const box1 = document.createElement("div");
  box1.className = "heart-box";
  box1.innerHTML = `
    <div class="heart">
      <svg viewBox="0 0 32 29" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
        <path d="M23.6,0c-2.9,0-5.6,1.8-7.6,4.4C13,1.8,10.4,0,7.4,0C2.5,0,0,3.5,0,8.4c0,9.2,16,20.6,16,20.6S32,17.6,32,8.4 C32,3.5,28.5,0,23.6,0z" fill="#ff2d55"/>
      </svg>
      <div class="heart-content">
        <h2 style="margin:0;font-size:20px">No hej to ja</h2>
        <p style="margin:8px 0 0;font-size:14px">Przygotowa≈Çem co≈õ dla ciebie</p>
        <div style="margin-top:10px">
          <button id="b1" class="btn">to tu masz nacisnƒÖƒá myszko</button>
        </div>
      </div>
    </div>
  `;
  page1.appendChild(box1);
  document.getElementById("b1").addEventListener("click", ()=> showPage(1));

  /* PAGE2 */
  falling(page2,"‚ù§Ô∏è",30);
  falling(page2,"‚≠ê",20);
  flowers(page2,["üåª","üåπ","üåº","üå∫"],22);

  const heartWrapper = document.createElement("div");
  heartWrapper.className = "heart-box";
  heartWrapper.style.width = "360px";
  heartWrapper.style.height = "320px";
  heartWrapper.innerHTML = `
    <div class="heart" id="movingHeart">
      <svg viewBox="0 0 32 29" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
        <path d="M23.6,0c-2.9,0-5.6,1.8-7.6,4.4C13,1.8,10.4,0,7.4,0C2.5,0,0,3.5,0,8.4c0,9.2,16,20.6,16,20.6S32,17.6,32,8.4 C32,3.5,28.5,0,23.6,0z" fill="#ff2d55"/>
      </svg>
      <div class="heart-content" id="heartContent">
        <div id="ptext" style="font-size:16px;line-height:1.25">Jeszcze nie tu ale zaraz chcia≈Çbym ciƒô o co≈õ zapytaƒá</div>
        <div style="margin-top:10px">
          <button id="moveBtn" class="btn">teraz tutaj</button>
        </div>
      </div>
    </div>
  `;
  page2.appendChild(heartWrapper);

  // usunƒÖ≈Çem wierszyki o Lence (tekst pozostaje)
  let step = 0;
  const moveBtn = document.getElementById("moveBtn");
  heartWrapper.style.left = "50%"; heartWrapper.style.top="50%"; heartWrapper.style.transform="translate(-50%,-50%)";
  moveBtn.addEventListener("click", ()=>{
    step++;
    if(step===1){
      heartWrapper.style.top="12%";
      heartWrapper.style.left="80%";
      heartWrapper.style.transform="translate(-50%,-50%)";
    } else if(step===2){
      heartWrapper.style.top="78%";
      heartWrapper.style.left="10%";
      moveBtn.textContent = "oho i co teraz?";
    } else if(step===3){
      heartWrapper.style.top="50%";
      heartWrapper.style.left="50%";
      moveBtn.textContent = "no dobra ale ostatnia rzecz";
    } else {
      showPage(2);
      initPage3();
    }
  });

  /* PAGE3 */
  function initPage3(){
    page3.innerHTML = "";
    falling(page3,"‚ù§Ô∏è",40);
    falling(page3,"‚≠ê",40);
    flowers(page3,["üå∏","üå∑","üåπ","üå∫","üåº"],26);

    const container = document.createElement("div");
    container.className = "page3-container";
    container.innerHTML = `
      <div style="height:8vh"></div>
      <div class="question">czy zostaniesz mojƒÖ walentynkƒÖ?</div>
      <div style="display:flex;align-items:center;justify-content:center;">
        <div class="big-heart" id="bigHeart">
          <svg viewBox="0 0 32 29" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
            <path d="M23.6,0c-2.9,0-5.6,1.8-7.6,4.4C13,1.8,10.4,0,7.4,0C2.5,0,0,3.5,0,8.4c0,9.2,16,20.6,16,20.6S32,17.6,32,8.4 C32,3.5,28.5,0,23.6,0z" fill="#ff2d55"/>
          </svg>
          <div class="inside">
            <div id="heartLines" style="margin-bottom:12px"></div>
            <!-- USUNIƒòTY bia≈Çy napis TAK (user prosi≈Ç) -->
          </div>
        </div>
      </div>
      <div class="choices">
        <div id="takBtn" class="choice-tak" title="TAK">TAKK!!!</div>
        <div id="nieBtn" class="choice-nie" title="NIE">nie</div>
      </div>
    `;
    page3.appendChild(container);

    const nieBtn = document.getElementById("nieBtn");
    const takBtn = document.getElementById("takBtn");
    const heartLines = document.getElementById("heartLines");
    const bigHeart = document.getElementById("bigHeart");

    let nieClicks = 0;
    const messages = ["ale jak to","aha?","üòÖ","no wezzz"];
    let msgIndex = 0;

    const STEPS = 8;
    // initial & final sizes for the green square (in px). initial small, final = 90% of min viewport
    const initialSize = 110; // initial button square size
    function finalSize() { return Math.floor(Math.min(window.innerWidth, window.innerHeight) * 0.9); }

    // set initial explicit size
    takBtn.style.width = initialSize + "px";
    takBtn.style.height = initialSize + "px";
    takBtn.style.borderRadius = "12px";
    takBtn.style.fontSize = Math.floor(initialSize * 0.18) + "px";
    takBtn.style.display = "flex";
    takBtn.style.alignItems = "center";
    takBtn.style.justifyContent = "center";

    nieBtn.addEventListener("click", ()=>{
      nieClicks++;
      // add message inside big heart
      const m = messages[msgIndex] || messages[messages.length-1];
      const span = document.createElement("div");
      span.textContent = m;
      span.style.fontSize = "14px";
      span.style.margin = "6px 0";
      heartLines.appendChild(span);
      msgIndex = Math.min(msgIndex+1, messages.length-1);

      // linear size increase for takBtn
      const fs = finalSize();
      const newSize = Math.round(initialSize + (fs - initialSize) * Math.min(nieClicks / STEPS, 1));
      takBtn.style.width = newSize + "px";
      takBtn.style.height = newSize + "px";
      takBtn.style.fontSize = Math.floor(newSize * 0.18) + "px";
      takBtn.style.transition = "width 240ms ease, height 240ms ease, font-size 240ms ease";

      // small "bounce" for NIE
      nieBtn.animate([{transform:'translateY(0)'},{transform:'translateY(-8px)'},{transform:'translateY(0)'}], {duration:220, easing:'ease-out'});

      if(nieClicks >= STEPS){
        // make the green button central, fixed and occupying finalSize (90%)
        const finalS = fs;
        takBtn.style.position = "fixed";
        takBtn.style.left = "50%";
        takBtn.style.top = "50%";
        takBtn.style.transform = "translate(-50%,-50%)";
        takBtn.style.width = finalS + "px";
        takBtn.style.height = finalS + "px";
        takBtn.style.borderRadius = Math.max(12, Math.floor(finalS * 0.03)) + "px";
        takBtn.style.fontSize = Math.floor(finalS * 0.12) + "px";
        takBtn.style.zIndex = "260";
        takBtn.style.boxShadow = "0 30px 80px rgba(0,0,0,0.35)";
        // disable the red "nie" button
        nieBtn.style.pointerEvents = "none";
        nieBtn.style.opacity = "0.45";
        // ensure takBtn is clickable (it already is)
        // show GIF as preview (GIF also shown again on celebration)
        const gif = document.getElementById("catsGif");
        gif.classList.add("show");
        gif.style.width = Math.min(window.innerWidth * 0.85, 900) + "px";
      }
    });

    // clicking TAK immediate -> immediate celebration (and show original GIF)
    takBtn.addEventListener("click", ()=>{
      if(nieClicks < STEPS){
        triggerCelebration(true);
        return;
      }
      // if already resized to final, also celebrate
      triggerCelebration(false);
    });

    // adapt sizes on resize during growth or after final
    window.addEventListener("resize", ()=>{
      if(nieClicks > 0 && nieClicks < STEPS){
        const fs = finalSize();
        const newSize = Math.round(initialSize + (fs - initialSize) * Math.min(nieClicks / STEPS, 1));
        takBtn.style.width = newSize + "px";
        takBtn.style.height = newSize + "px";
        takBtn.style.fontSize = Math.floor(newSize * 0.18) + "px";
      } else if(nieClicks >= STEPS){
        const fs = finalSize();
        takBtn.style.width = fs + "px";
        takBtn.style.height = fs + "px";
        takBtn.style.fontSize = Math.floor(fs * 0.12) + "px";
        document.getElementById("catsGif").style.width = Math.min(window.innerWidth * 0.85, 900) + "px";
      }
    });
  } // initPage3 end

  /* Celebration */
  function triggerCelebration(forceCenterGif = false){
    const overlay = document.getElementById("overlay");
    const explosion = document.getElementById("explosion");
    const gif = document.getElementById("catsGif");
    overlay.classList.add("show");
    explosion.innerHTML = "";

    const colors = ["#ff2d55","#ff9aa2","#ffd166","#ff6b6b","#ff3b30","#ffd6e8"];
    const num = 80;
    const cx = window.innerWidth/2;
    const cy = window.innerHeight/2;
    for(let i=0;i<num;i++){
      const s = document.createElement("div");
      s.className = "spark";
      if(Math.random() < 0.5){
        s.style.background = colors[Math.floor(Math.random()*colors.length)];
        const size = 8 + Math.random()*22;
        s.style.width = s.style.height = size + "px";
        s.style.borderRadius = "50%";
      } else {
        s.textContent = "‚ù§Ô∏è";
        s.style.fontSize = (10 + Math.random()*28) + "px";
        s.style.width = s.style.height = "auto";
        s.style.lineHeight = "1";
        s.style.padding = "2px";
        s.style.background = "transparent";
      }
      s.style.left = (cx + (Math.random()*40-20)) + "px";
      s.style.top = (cy + (Math.random()*40-20)) + "px";
      const angle = Math.random()*Math.PI*2;
      const radius = 120 + Math.random()*500;
      const tx = Math.cos(angle) * radius + "px";
      const ty = Math.sin(angle) * radius + "px";
      s.style.setProperty("--tx", tx);
      s.style.setProperty("--ty", ty);
      s.style.opacity = 1;
      s.style.zIndex = 220 + Math.floor(Math.random()*80);
      explosion.appendChild(s);
      setTimeout(()=> s.remove(), 1400 + Math.random()*900);
    }

    for(let j=0;j<28;j++){
      const h = document.createElement("div");
      h.className = "falling";
      h.textContent = "üíñ";
      h.style.left = Math.random()*100 + "vw";
      h.style.fontSize = 18 + Math.random()*30 + "px";
      h.style.animationDuration = 1.2 + Math.random()*2 + "s";
      h.style.top = (-20 - Math.random()*120) + "px";
      overlay.appendChild(h);
      setTimeout(()=> h.remove(), 3000);
    }

    const flash = document.createElement("div");
    flash.style.position = "fixed";
    flash.style.inset = 0;
    flash.style.background = "radial-gradient(circle at center, rgba(255,255,255,0.95), rgba(255,255,255,0.2) 40%, transparent 60%)";
    flash.style.zIndex = 260;
    flash.style.pointerEvents = "none";
    document.body.appendChild(flash);
    setTimeout(()=> flash.remove(), 420);

    // poka≈º GIF (PRZYWR√ìCONY)
    gif.classList.add("show");
    gif.style.width = Math.min(window.innerWidth * 0.85, 900) + "px";

    overlay.addEventListener("click",(e)=>{
      if(e.target === overlay){
        overlay.classList.remove("show");
        explosion.innerHTML = "";
        gif.classList.remove("show");
      }
    }, { once: true });
  }

  // light periodic falling
  setInterval(()=> {
    const active = document.querySelector(".page.active") || page1;
    falling(active, Math.random() < 0.5 ? "‚ù§Ô∏è" : "‚≠ê", 4);
  }, 1400);

  // lazy init page3 on activation
  const observer = new MutationObserver(mutations=>{
    mutations.forEach(m=>{
      if(m.attributeName === 'class'){
        const target = m.target;
        if(target === page3 && target.classList.contains('active')){
          if(!page3.dataset.init){ page3.dataset.init = "1"; initPage3(); }
        }
      }
    })
  });
  observer.observe(page3, { attributes: true });

}); // DOMContentLoaded
</script>

</body>
</html>



